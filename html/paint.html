<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/6.1.1/d3.min.js" integrity="sha512-5xkNvFVCctXwOszeifE8pzjyDFlHvHDCKIrhwmuSbCtTHqc7IhA6/1tTNYXE8WmYvwP5KFQegCS1QRR4poYgjg==" crossorigin="anonymous"></script>

</head>

<body>
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="500px" height="500px" id="panel"></svg>
    <button onclick="rect.create()">rect</button>
    <script>
        var panel = document.querySelector('#panel');

        let x = 0;
        let y = 0;
        let rect = {
            create: function() {
                x += 100;
                y += 100;
                var rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                panel.appendChild(rect);
                rect.setAttribute('width', '300');
                rect.setAttribute('height', '200');
                rect.setAttribute('fill', 'red');
                rect.setAttribute('x', x);
                rect.setAttribute('y', y);
                
                rect.addEventListener('click', function() {
                    console.log('test');
                });
                rect.addEventListener('mousedown', function() {
                    console.log('mousedown');
                });
                rect.addEventListener('mousemove', function() {
                    console.log('mousemove', event.x);
                    this.setAttribute('x',event.x - this.width/2);
                });
                rect.addEventListener('mouseup', function() {
                    console.log('mouseup');
                });


            }
        };
        
        
        class Drawing{
            getWidth(){
                return parseInt(this.getAttribute('width'));
            }
        }
        class Rect extends Drawing{
            
        }
    </script>
</body></html>
